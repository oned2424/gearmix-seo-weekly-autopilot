# Google Drive自動連携設定マニュアル

文系大学生でもわかるように、ステップバイステップで解説します。
この作業を行うことで、作成したツールがあなたのGoogle Driveに直接ファイルを保存できるようになります。

## ゴール
「サービスアカウント」というロボット用の鍵を作成し、GitHubに登録すること。

---

## 手順1: Google Cloud プロジェクトの準備

1. **Google Cloud Console** にアクセスします。
   - URL: https://console.cloud.google.com/
   - 普段お使いのGoogleアカウントでログインしてください。

2. **プロジェクトの選択（または作成）**:
   - 画面左上のロゴの横にあるプロジェクト名をクリックします。
   - すでに作成済みの **`gearmix-seo-weekly-autopilot`** があれば、それを選択します。
   - なければ「新しいプロジェクト」から作成してください。

3. **APIの有効化**:
   - プロジェクトを選択した状態で進めます。
   - 左上のメニュー（三本線）から「APIとサービス」→「ライブラリ」をクリック。
   - 検索バーに `Google Drive API` と入力して検索。
   - 出てきた「Google Drive API」をクリックし、「有効にする」をクリック。
   - ※すでに有効になっている場合はそのままでOKです。

---

## 手順2: 鍵（サービスアカウント）の作成

ここが一番重要です！ロボットにあげる合鍵を作ります。

1. **認証情報の作成**:
   - 左上のメニューから「APIとサービス」→「認証情報」をクリック。
   - 上にある「＋ 認証情報を作成」をクリックし、「サービスアカウント」を選択。

2. **詳細入力**:
   - **サービスアカウント名**: `drive-uploader` （なんでもOK）
   - 「作成して続行」をクリック。
   - **ロール（権限）**: 「基本」→「編集者」を選択。
   - 「続行」→「完了」をクリック。

3. **鍵のダウンロード**:
   - 一覧に作成したメールアドレス（例: `drive-uploader@weeklyreportauto...`）が出てくるので、クリックします。
   - 上のタブから「キー」を選択。
   - 「鍵を追加」→「新しい鍵を作成」をクリック。
   - キーのタイプ: **JSON**（そのままでOK）を選択し、「作成」をクリック。
   - **ファイルが自動でダウンロードされます。これが合鍵です！大切に保管してください。**

---

## 手順3: フォルダの共有

ロボット（サービスアカウント）があなたのフォルダにアクセスできるように、招待してあげます。

1. **正確なメールアドレスの確認**:
   - **重要**: ダウンロードしたJSONファイル（鍵）をメモ帳などで開いてください。
   - その中の `"client_email": "..."` と書かれている部分のメールアドレスをコピーします。
   - ※プロジェクトを作成した際に、自動で数字（例: `-123456`）がついている場合があるため、必ずファイルの中身を確認してください。

2. **フォルダの共有**:
   - Google Driveを開き、レポートを保存したいフォルダ（例: `001_週次`）を右クリック。
   - 「共有」をクリック。
   - コピーしたメールアドレスを追加し、「編集者」として「送信（共有）」します。
   - ※これで、このロボットだけがそのフォルダに書き込めるようになります。

---

## 手順4: 宛先フォルダIDの確認

ツールに「どこに保存するか」を教えるためのIDを調べます。

1. Google Driveで保存先のフォルダ（例: `001_週次`）を開きます。
2. ブラウザのアドレスバー（URL）を見ます。
   - `https://drive.google.com/drive/folders/1abcDEfgHIjkLMNopQrsTuvWxyZ_12345`
   - この末尾の `1abcDEfgHIjkLMNopQrsTuvWxyZ_12345` の部分が**フォルダID**です。これをコピーして控えておいてください。

---

## 手順5: GitHubへの登録

最後に、ダウンロードした合鍵をGitHub Actionsに登録します。

1. ツールのGitHubページを開きます。
2. 「Settings」タブをクリック。
3. 左メニューの「Secrets and variables」→「Actions」をクリック。
4. 「New repository secret」をクリック。
5. 以下を入力して登録します：
   - **Name**: `GMX_DRIVE_CREDENTIALS`
     - **Secret**: ダウンロードしたJSONファイルの中身を**すべてそのまま**コピペします。
   - **Name**: `GMX_DRIVE_FOLDER_ID`
     - **Secret**: 手順4で調べた「フォルダID」を貼り付けます。

これで設定は完了です！
あとは、私が実装するコードが反映されれば、次回の実行から自動でDriveに保存されるようになります。
